- config:
    name: 机器人频道-建立关联
    parameters:
      - account-password:
          - ["test_ff7", "123456"]
    request:
        base_url: http://restapi-test1.fishsaying.com
        headers:
            User-Agent: Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.3(KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36
- test:
   name: Login
   suite: login_suite()

#机器人列表
- test:
    name: robot_list
    variables:
      pageNo: 1
      pageSize: 999
      searchType: 1
      keyWord: ''
    api: api_v1_robot_list_GET($pageNo, $pageSize,$searchType,$keyWord)
    extract:
      - content: content
      - robot_result: content.result.list


#机器人可选列表
- test:
    name: robot_choose_list
    skipIf: ${space_null($robot_result)}
    variables:
#        direction:
        name: ' '
#        orderClause:
#        orderField:
        pageSize: 999
        pageNo: 1
        robotId: ${rand_robot($content)}
        type:
    api: api_v1_robot_channel_choose_list_POST($direction,$name,$orderClause,$orderField,$pageNo,$pageSize,$robotId,$type)
    extract:
      - channel_content: content
      - list_result: content.result.list

- test:
    name: robot_channel_add
    skipIf: ${space_null($list_result)}
    variables:
       channelIdList: ${rand_robot($channel_content)}
       robotId: ${rand_robot($content)}
    api: api_v1_robot_channel_add_POST($channelIdList, $robotId)
